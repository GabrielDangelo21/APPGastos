<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciador de Finan√ßas</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <div class="container">
        <h1>üí∏ Meu Controle Financeiro</h1>

        <div id="resumo-container">
        </div>
        <div class="card add-transaction-section">
            <h2><i class="fas fa-plus-circle"></i> Adicionar Nova Transa√ß√£o</h2>
            <form id="transaction-form">
                <div class="input-group">
                    <label for="data">Data:</label>
                    <input type="date" id="data" required>
                </div>
                <div class="input-group">
                    <label for="descricao">Descri√ß√£o:</label>
                    <input type="text" id="descricao" placeholder="Ex: Sal√°rio, Aluguel" required>
                </div>
                <div class="input-group">
                    <label for="valor">Valor:</label>
                    <input type="number" id="valor" step="0.01" placeholder="0.00" required>
                </div>

                <div class="input-group">
                    <label for="tipo">Tipo:</label>
                    <select id="tipo" required>
                        <option value="">Selecione o Tipo</option>
                        <option value="Receita">Receita</option>
                        <option value="Despesa">Despesa</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="conta">Conta:</label>
                    <select id="conta" required>
                        <option value="">Carregando contas...</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="categoria">Categoria:</label>
                    <select id="categoria" required>
                        <option value="">Carregando categorias...</option>
                    </select>
                </div>

                <button type="submit" class="btn-submit">Adicionar Transa√ß√£o</button>
            </form>
        </div>

        <div class="grid-cadastros"
            style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">

            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 style="margin-bottom: 0; border: none;"><i class="fas fa-university"></i> Nova Conta</h2>
                    <button type="button" onclick="listarTodasContas()" class="btn-action"
                        style="color: var(--accent);">
                        <i class="fas fa-eye"></i> Ver Todas
                    </button>
                </div>
                <form id="form-conta">
                    <div class="input-group">
                        <label>Institui√ß√£o:</label>
                        <input type="text" id="conta-nome" placeholder="Ex: Nubank" required>
                    </div>
                    <div class="input-group">
                        <label>Moeda:</label>
                        <select id="conta-moeda" required>
                            <option value="BRL">BRL (R$)</option>
                            <option value="EUR">EUR (‚Ç¨)</option>
                            <option value="USD">USD ($)</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Saldo Inicial:</label>
                        <input type="number" id="conta-saldo" placeholder="0.00" step="0.01" required>
                    </div>
                    <div class="input-group">
                        <label>Tipo de Conta:</label>
                        <select id="conta-tipo" required>
                            <option value="Conta Corrente">Conta Corrente</option>
                            <option value="Poupan√ßa">Poupan√ßa</option>
                            <option value="Investimento">Investimento</option>
                            <option value="Cart√£o de Cr√©dito">Cart√£o de Cr√©dito</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-submit" style="background: var(--accent2); width: 100%;">
                        <i class="fas fa-save"></i> Salvar Conta
                    </button>
                </form>
            </div>

            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 style="margin-bottom: 0; border: none;"><i class="fas fa-tags"></i> Nova Categoria</h2>
                    <button type="button" onclick="listarTodasCategorias()" class="btn-action"
                        style="color: var(--ok);">
                        <i class="fas fa-eye"></i> Ver Todas
                    </button>
                </div>
                <form id="form-categoria">
                    <div class="input-group">
                        <label>Nome da Categoria:</label>
                        <input type="text" id="cat-nome" placeholder="Ex: Lazer, Sa√∫de" required>
                    </div>
                    <div class="input-group">
                        <label>Tipo:</label>
                        <select id="cat-tipo" required>
                            <option value="Despesa">Despesa</option>
                            <option value="Receita">Receita</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-submit" style="background: var(--ok); width: 100%;">
                        <i class="fas fa-save"></i> Salvar Categoria
                    </button>
                </form>
            </div>
        </div>

        <div class="card transaction-list-section" style="display: none;">
            <h2><i class="fas fa-list"></i> Hist√≥rico de Transa√ß√µes</h2>
            <table id="transaction-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Data</th>
                        <th>Descri√ß√£o</th>
                        <th>Valor</th>
                        <th>Categoria</th>
                        <th>Conta</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
            <p id="no-transactions-message" style="text-align: center; color: #aaa; margin-top: 20px; display: none;">
                Nenhuma transa√ß√£o encontrada.
            </p>
        </div>
    </div>

    <div id="modal-edit" class="modal-overlay" style="display: none;">
        <div class="card modal-content">
            <h2 id="modal-title">Editar Registro</h2>
            <form id="form-edit">
                <input type="hidden" id="edit-id">
                <div id="edit-fields"></div>

                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button type="submit" class="btn-submit">Salvar Altera√ß√µes</button>
                    <button type="button" onclick="fecharModal()" class="btn-submit"
                        style="background: gray;">Cancelar</button>
                </div>
            </form>
        </div>
    </div>
    <script src="{{ url_for('static', filename='app.js') }}"></script>
    <div id="modal-detalhes" class="modal-overlay" style="display: none;">
        <div class="card modal-content list-modal">
            <div class="modal-header">
                <h2 id="detalhe-titulo-moeda">Transa√ß√µes</h2>
                <button onclick="fecharModalDetalhes()" class="btn-close">&times;</button>
            </div>
            <div class="table-container">
                <table id="table-detalhes">
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>Descri√ß√£o</th>
                            <th>Valor</th>
                            <th>Categoria</th>
                        </tr>
                    </thead>
                    <tbody id="body-detalhes"></tbody>
                </table>
            </div>
        </div>
    </div>
    <div id="modal-contas" class="modal-overlay" style="display: none;">
        <div class="card list-modal">
            <div class="modal-header">
                <h2>Gerenciar Contas</h2>
                <button class="btn-close" onclick="fecharModalContas()">&times;</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Institui√ß√£o</th>
                        <th>Moeda</th>
                        <th>Saldo</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="body-contas">
                </tbody>
            </table>
        </div>
    </div>

    <div id="modal-categorias" class="modal-overlay" style="display: none;">
        <div class="card list-modal">
            <div class="modal-header">
                <h2>Gerenciar Categorias</h2>
                <button class="btn-close" onclick="fecharModalCategorias()">&times;</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nome da Categoria</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="body-categorias">
                </tbody>
            </table>
        </div>
    </div>
    <div id="modal-edit-conta" class="modal-overlay" style="display: none;">
        <div class="card add-transaction-section" style="width: 400px;">
            <div class="modal-header">
                <h2><i class="fas fa-edit"></i> Editar Conta</h2>
                <button class="btn-close" onclick="fecharModalEditConta()">&times;</button>
            </div>
            <form id="form-edit-conta">
                <input type="hidden" id="edit-conta-id">
                <div class="input-group">
                    <label>Institui√ß√£o:</label>
                    <input type="text" id="edit-conta-nome" required>
                </div>
                <div class="input-group">
                    <label>Moeda:</label>
                    <select id="edit-conta-moeda">
                        <option value="BRL">BRL (R$)</option>
                        <option value="EUR">EUR (‚Ç¨)</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Saldo Inicial:</label>
                    <input type="number" id="edit-conta-saldo" step="0.01" required>
                </div>
                <div class="input-group">
                    <label>Tipo:</label>
                    <select id="edit-conta-tipo">
                        <option value="Conta">Conta (Corrente/Poupan√ßa)</option>
                        <option value="Cart√£o de Cr√©dito">Cart√£o de Cr√©dito</option>
                    </select>
                </div>
                <button type="submit" class="btn-action ok" style="width: 100%; margin-top: 15px;">
                    Salvar Altera√ß√µes
                </button>
            </form>
        </div>
    </div>
</body>

</html>